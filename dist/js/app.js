var app=angular.module("treasyJSWebApp",["ngRoute","treeGrid","ui.bootstrap"]);app.config(["$locationProvider",function($locationProvider){$locationProvider.hashPrefix("")}]),app.config(["$uibModalProvider",function($uibModalProvider){$uibModalProvider.options.windowClass="show",$uibModalProvider.options.backdropClass="show"}]),app.config(["$routeProvider",function($routeProvider){$routeProvider.when("/",{templateUrl:"partials/home.html",controller:"PageCtrl"}).when("/users",{templateUrl:"partials/users.html",controller:"UsersCtrl"}).when("/products",{templateUrl:"partials/products.html",controller:"ProductsCtrl"}).otherwise("/404",{templateUrl:"partials/404.html",controller:"PageCtrl"})}]),app.factory("DataDemo",function(){return{getDatas:function(){return[{DemographicId:1,ParentId:null,Name:"United States of America",Description:"United States of America",Area:9826675,Population:318212e3,TimeZone:"UTC -5 to -10"},{DemographicId:2,ParentId:1,Name:"California",Description:"The Tech State",Area:423970,Population:3834e4,TimeZone:"Pacific Time"},{DemographicId:3,ParentId:2,Name:"San Francisco",Description:"The happening city",Area:231,Population:837442,TimeZone:"PST"},{DemographicId:4,ParentId:2,Name:"Los Angeles",Description:"Disco city",Area:503,Population:3904657,TimeZone:"PST"},{DemographicId:5,ParentId:1,Name:"Illinois",Description:"Not so cool",Area:57914,Population:12882135,TimeZone:"Central Time Zone"},{DemographicId:6,ParentId:5,Name:"Chicago",Description:"Financial City",Area:234,Population:2695598,TimeZone:"CST"},{DemographicId:7,ParentId:1,Name:"Texas",Description:"Rances, Oil & Gas",Area:268581,Population:26448193,TimeZone:"Mountain"},{DemographicId:8,ParentId:1,Name:"New York",Description:"The largest diverse city",Area:141300,Population:19651127,TimeZone:"Eastern Time Zone"},{DemographicId:14,ParentId:8,Name:"Manhattan",Description:"Time Square is the place",Area:269.403,Population:0,TimeZone:"EST"},{DemographicId:15,ParentId:14,Name:"Manhattan City",Description:"Manhattan island",Area:33.77,Population:0,TimeZone:"EST"},{DemographicId:16,ParentId:14,Name:"Time Square",Description:"Time Square for new year",Area:269.4,Population:0,TimeZone:"EST"},{DemographicId:17,ParentId:8,Name:"Niagra water fall",Description:"Close to Canada",Area:65.7,Population:0,TimeZone:"EST"},{DemographicId:18,ParentId:8,Name:"Long Island",Description:"Harbour to Atlantic",Area:362.9,Population:0,TimeZone:"EST"},{DemographicId:51,ParentId:1,Name:"All_Other",Description:"All_Other demographics",Area:0,Population:0,TimeZone:0},{DemographicId:201,ParentId:null,Name:"India",Description:"Hydrabad tech city",Area:9826675,Population:318212e3,TimeZone:"IST"},{DemographicId:301,ParentId:null,Name:"Bangladesh",Description:"Country of love",Area:9826675,Population:318212e3,TimeZone:"BST"}]},getBigData:function(sample,number,deptMax,fn,keyId,keyParent){function forDept(obj,fn,opt,deptParent){"use strict";var data,width,childs=[];if(angular.isFunction(fn)){width=getRandomInt(2,6);for(var i=1;i<width&&opt.amount<=opt.limit;i++)opt.amount++,data=fn(obj,angular.copy(obj),opt),deptParent<opt.deptMax&&getRandomInt(-2,2)>0&&forDept(data,fn,opt,++deptParent),childs.push(data)}return obj.__children__=childs,obj}function getRandomInt(min,max){return Math.floor(Math.random()*(max-min))+min}console.time("Generate_BigData");for(var patern,data=[],opt={amount:0,deptMax:deptMax,limit:number},fnGenerate=fn||function(parent,cloned,_opt){"use strict";var keyO=Object.keys(cloned),lenO=keyO.length;keyParent&&(cloned[keyParent]=parent&&parent[keyId]||null),cloned[keyId]=_opt.amount;for(var i=0;i<lenO;i++)keyO[i]!==keyParent&&keyO[i]!==keyId&&(cloned[keyO[i]]+="#"+_opt.amount);return cloned};opt.amount<number;)opt.amount++,patern=fnGenerate(null,angular.copy(sample),opt),data.push(forDept(patern,fnGenerate,opt,1));return console.timeEnd("Generate_BigData"),data}}}),app.controller("UsersCtrl",["$scope",function($scope){console.log("Users Controller reporting for duty.")}]),app.controller("ProductsCtrl",["$scope","$uibModal","$filter","$timeout",function($scope,$uibModal,$filter,$timeout,DataDemo){$scope.products_treegrid={},$scope.filterString="",$scope.getTreeData=function(){return[{Name:"Calças",Value:4e3,Quant:20,visible:!0,Observation:"obs...",level:1,children:[{Name:"   Calça Jeans",Value:200,Quant:10,visible:!0,Observation:"obs...",level:2,children:[{Name:"-     Calça Jeans P",Value:200,Quant:10,visible:!0,Observation:"obs...",level:3,icons:{iconLeaf:"fa fa-circle-o",iconCollapse:"fa fa-minus",iconExpand:"fa fa-plus"}},{Name:"-     Calça Jeans M",Value:200,Quant:10,visible:!0,Observation:"obs...",level:3,icons:{iconLeaf:"fa fa-circle-o",iconCollapse:"fa fa-minus",iconExpand:"fa fa-plus"}},{Name:"-     Calça Jeans G",Value:200,Quant:10,visible:!0,Observation:"obs...",level:3,icons:{iconLeaf:"fa fa-circle-o",iconCollapse:"fa fa-minus",iconExpand:"fa fa-plus"}}],icons:{iconLeaf:"fa fa-circle-o",iconCollapse:"fa fa-minus",iconExpand:"fa fa-plus"}},{Name:"   Calça Moleton",Value:200,Quant:10,visible:!0,Observation:"obs...",level:2,children:[{Name:"-     Calça Moleton P",Value:200,Quant:10,visible:!0,Observation:"obs...",level:3,icons:{iconLeaf:"fa fa-circle-o",iconCollapse:"fa fa-minus",iconExpand:"fa fa-plus"}},{Name:"-     Calça Moleton M",Value:200,Quant:10,visible:!0,Observation:"obs...",level:3,icons:{iconLeaf:"fa fa-circle-o",iconCollapse:"fa fa-minus",iconExpand:"fa fa-plus"}},{Name:"-     Calça Moleton G",Value:200,Quant:10,visible:!0,Observation:"obs...",level:3,icons:{iconLeaf:"fa fa-circle-o",iconCollapse:"fa fa-minus",iconExpand:"fa fa-plus"}}],icons:{iconLeaf:"fa fa-circle-o",iconCollapse:"fa fa-minus",iconExpand:"fa fa-plus"}}],icons:{iconLeaf:"fa fa-circle-o",iconCollapse:"fa fa-minus",iconExpand:"fa fa-plus"}},{Name:"Bermudas",Value:999.8,Quant:20,visible:!0,Observation:"obs...",level:1,children:[{Name:"Bermuda Jeans",Value:49.99,Quant:10,visible:!0,Observation:"obs...",level:2,icons:{iconLeaf:"fa fa-circle-o",iconCollapse:"fa fa-minus",iconExpand:"fa fa-plus"}},{Name:"Bermuda Tactel",Value:49.99,Quant:10,visible:!0,Observation:"obs...",level:2,icons:{iconLeaf:"fa fa-circle-o",iconCollapse:"fa fa-minus",iconExpand:"fa fa-plus"}}],icons:{iconLeaf:"fa fa-circle-o",iconCollapse:"fa fa-minus",iconExpand:"fa fa-plus"}},{Name:"Camisetas",Value:1799.9,Quant:30,visible:!0,Observation:"obs...",level:1,children:[{Name:"Camiseta Regata",Value:39.99,Quant:10,visible:!0,Observation:"obs...",level:2,icons:{iconLeaf:"fa fa-circle-o",iconCollapse:"fa fa-minus",iconExpand:"fa fa-plus"}},{Name:"Camiseta Estampada",Value:49.99,Quant:10,visible:!0,Observation:"obs...",level:2,icons:{iconLeaf:"fa fa-circle-o",iconCollapse:"fa fa-minus",iconExpand:"fa fa-plus"}},{Name:"Camiseta Gola Polo",Value:69.99,Quant:10,visible:!0,Observation:"obs...",level:2,icons:{iconLeaf:"fa fa-circle-o",iconCollapse:"fa fa-minus",iconExpand:"fa fa-plus"}}],icons:{iconLeaf:"fa fa-circle-o",iconCollapse:"fa fa-minus",iconExpand:"fa fa-plus"}},{Name:"Camisas",Value:2299.8,Quant:20,visible:!0,Observation:"obs...",level:1,TimeZone:"Mountain",children:[{Name:"Camisa Jeans",Value:99.99,Quant:10,visible:!0,Observation:"obs...",level:2,icons:{iconLeaf:"fa fa-circle-o",iconCollapse:"fa fa-minus",iconExpand:"fa fa-plus"}},{Name:"Camisa Linho",Value:129.99,Quant:10,visible:!0,Observation:"obs...",level:2,icons:{iconLeaf:"fa fa-circle-o",iconCollapse:"fa fa-minus",iconExpand:"fa fa-plus"}}],icons:{iconLeaf:"fa fa-circle-o",iconCollapse:"fa fa-minus",iconExpand:"fa fa-plus"}},{Name:"Roupas Intimas",Value:1299.6,Quant:20,visible:!0,Observation:"obs...",level:1,children:[{Name:"Cueca Box",Value:29.99,Quant:10,visible:!0,Observation:"obs...",level:2,icons:{iconLeaf:"fa fa-circle-o",iconCollapse:"fa fa-minus",iconExpand:"fa fa-plus"}},{Name:"Sunga",Value:29.99,Quant:10,visible:!0,Observation:"obs...",level:2,icons:{iconLeaf:"fa fa-circle-o",iconCollapse:"fa fa-minus",iconExpand:"fa fa-plus"}},{Name:"Calcinha",Value:19.99,Quant:10,visible:!0,Observation:"obs...",level:2,icons:{iconLeaf:"fa fa-circle-o",iconCollapse:"fa fa-minus",iconExpand:"fa fa-plus"}},{Name:"Sutiã",Value:49.99,Quant:10,visible:!0,Observation:"obs...",level:2,icons:{iconLeaf:"fa fa-circle-o",iconCollapse:"fa fa-minus",iconExpand:"fa fa-plus"}}],icons:{iconLeaf:"fa fa-circle-o",iconCollapse:"fa fa-minus",iconExpand:"fa fa-plus"}}]},$scope.tree_data=$scope.getTreeData(),$scope.expanding_property={field:"Name",displayName:"Name",sortable:!0,filterable:!0,cellTemplate:"<span>{{row.branch[expandingProperty.field]}}</span>"},$scope.checkIfEnterKeyWasPressed=function($event){13===($event.which||$event.keyCode)&&$scope.search()},$scope.search=function(){$scope.tree_data=$filter("searchFor")($scope.getTreeData(),$scope.filterString,$scope.expanding_property,$scope.col_defs,!0)},$scope.col_defs=[{field:"Value",sortable:!0,cellTemplate:"<span>R$ {{ row.branch[col.field] }}</span>",sortingType:"number"},{field:"Quant",sortable:!0,sortingType:"number"}],$scope.my_tree_handler=function(item){$scope.selectedItem=item},$scope.addForm=function(){$scope.isEdit=!1,$uibModal.open({templateUrl:"../templates/modal-form.html",controller:ModalInstanceCtrl,scope:$scope,resolve:{productForm:function(){return $scope.productForm}}}).result.then(function(selectedItem){},function(){})},$scope.editForm=function(){($scope.isEdit=!0,$scope.selectedItem)?$uibModal.open({templateUrl:"../templates/modal-form.html",controller:ModalInstanceCtrl,scope:$scope,resolve:{productForm:function(){return $scope.productForm}}}).result.then(function(selectedItem){},function(){}):alert("Não há nenhum item selecionado.")},$scope.deleteChild=function(item){for(var i=0;i<item.children.length;i++){var curObj=item.children[i];curObj.Name==$scope.selectedItem.Name?item.children.splice(i,1):curObj.children&&curObj.children.length>0&&$scope.deleteChild(curObj)}},$scope.deleteForm=function(){if($scope.selectedItem){if(confirm("Deseja remover o item selecionado?"))for(var i=0;i<this.tree_data.length;i++){var curObj=this.tree_data[i];curObj.Name==$scope.selectedItem.Name?this.tree_data.splice(i,1):curObj.children&&curObj.children.length>0&&$scope.deleteChild(curObj)}}else alert("Não há nenhum item selecionado.")};var ModalInstanceCtrl=function($scope,$uibModalInstance,productForm){$scope.form={},$scope.product={},$scope.oldName="",$scope.isEdit&&$scope.selectedItem&&($scope.oldName=$scope.selectedItem.Name,$scope.product.name=$scope.selectedItem.Name,$scope.product.value=$scope.selectedItem.Value,$scope.product.quant=$scope.selectedItem.Quant,$scope.product.observation=$scope.selectedItem.Observation),$scope.formInit=function(){},$scope.submitForm=function(){if($scope.form.productForm.$valid){if($scope.isEdit)$scope.updateItem($scope.tree_data),alert("Dados alterados com sucesso!");else{var obj={};$scope.selectedItem?($scope.selectedItem.expanded=!0,obj=$scope.selectedItem.children):obj=$scope.tree_data,obj.push({Name:$scope.product.name,Value:$scope.product.value,Quant:$scope.product.quant,Observation:$scope.product.observation,icons:{iconLeaf:"fa fa-circle-o",iconCollapse:"fa fa-minus",iconExpand:"fa fa-plus"}})}$uibModalInstance.close("closed")}else console.log("productForm is not in scope")},$scope.cancel=function(){$uibModalInstance.dismiss("cancel")},$scope.updateItem=function(obj){if(obj)for(var i=0;i<obj.length;i++){var curObj=obj[i];if(curObj&&curObj.Name==$scope.oldName){curObj.Name=$scope.product.name,curObj.Value=$scope.product.value,curObj.Quant=$scope.product.quant,curObj.Observation=$scope.product.observation;break}curObj.children&&curObj.children.length>0&&$scope.updateItem(curObj.children)}}};ModalInstanceCtrl.$inject=["$scope","$uibModalInstance","productForm"]}]),app.controller("PageCtrl",function(){console.log("Page Controller reporting for duty.")});
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImFwcC5qcyJdLCJuYW1lcyI6WyJhcHAiLCJhbmd1bGFyIiwibW9kdWxlIiwiY29uZmlnIiwiJGxvY2F0aW9uUHJvdmlkZXIiLCJoYXNoUHJlZml4IiwiJHVpYk1vZGFsUHJvdmlkZXIiLCJvcHRpb25zIiwid2luZG93Q2xhc3MiLCJiYWNrZHJvcENsYXNzIiwiJHJvdXRlUHJvdmlkZXIiLCJ3aGVuIiwidGVtcGxhdGVVcmwiLCJjb250cm9sbGVyIiwib3RoZXJ3aXNlIiwiZmFjdG9yeSIsImdldERhdGFzIiwiRGVtb2dyYXBoaWNJZCIsIlBhcmVudElkIiwiTmFtZSIsIkRlc2NyaXB0aW9uIiwiQXJlYSIsIlBvcHVsYXRpb24iLCJUaW1lWm9uZSIsImdldEJpZ0RhdGEiLCJzYW1wbGUiLCJudW1iZXIiLCJkZXB0TWF4IiwiZm4iLCJrZXlJZCIsImtleVBhcmVudCIsImZvckRlcHQiLCJvYmoiLCJvcHQiLCJkZXB0UGFyZW50IiwiZGF0YSIsIndpZHRoIiwiY2hpbGRzIiwiaXNGdW5jdGlvbiIsImdldFJhbmRvbUludCIsImkiLCJhbW91bnQiLCJsaW1pdCIsImNvcHkiLCJwdXNoIiwiX19jaGlsZHJlbl9fIiwibWluIiwibWF4IiwiTWF0aCIsImZsb29yIiwicmFuZG9tIiwiY29uc29sZSIsInRpbWUiLCJwYXRlcm4iLCJmbkdlbmVyYXRlIiwicGFyZW50IiwiY2xvbmVkIiwiX29wdCIsImtleU8iLCJPYmplY3QiLCJrZXlzIiwibGVuTyIsImxlbmd0aCIsInRpbWVFbmQiLCIkc2NvcGUiLCJsb2ciLCIkdWliTW9kYWwiLCIkZmlsdGVyIiwiJHRpbWVvdXQiLCJEYXRhRGVtbyIsInByb2R1Y3RzX3RyZWVncmlkIiwiZmlsdGVyU3RyaW5nIiwiZ2V0VHJlZURhdGEiLCJWYWx1ZSIsIlF1YW50IiwidmlzaWJsZSIsIk9ic2VydmF0aW9uIiwibGV2ZWwiLCJjaGlsZHJlbiIsImljb25zIiwiaWNvbkxlYWYiLCJpY29uQ29sbGFwc2UiLCJpY29uRXhwYW5kIiwidHJlZV9kYXRhIiwiZXhwYW5kaW5nX3Byb3BlcnR5IiwiZmllbGQiLCJkaXNwbGF5TmFtZSIsInNvcnRhYmxlIiwiZmlsdGVyYWJsZSIsImNlbGxUZW1wbGF0ZSIsImNoZWNrSWZFbnRlcktleVdhc1ByZXNzZWQiLCIkZXZlbnQiLCJ3aGljaCIsImtleUNvZGUiLCJzZWFyY2giLCJjb2xfZGVmcyIsInNvcnRpbmdUeXBlIiwibXlfdHJlZV9oYW5kbGVyIiwiaXRlbSIsInNlbGVjdGVkSXRlbSIsImFkZEZvcm0iLCJpc0VkaXQiLCJvcGVuIiwiTW9kYWxJbnN0YW5jZUN0cmwiLCJzY29wZSIsInJlc29sdmUiLCJwcm9kdWN0Rm9ybSIsInJlc3VsdCIsInRoZW4iLCJlZGl0Rm9ybSIsImFsZXJ0IiwiZGVsZXRlQ2hpbGQiLCJjdXJPYmoiLCJzcGxpY2UiLCJkZWxldGVGb3JtIiwiY29uZmlybSIsInRoaXMiLCIkdWliTW9kYWxJbnN0YW5jZSIsImZvcm0iLCJwcm9kdWN0Iiwib2xkTmFtZSIsIm5hbWUiLCJ2YWx1ZSIsInF1YW50Iiwib2JzZXJ2YXRpb24iLCJmb3JtSW5pdCIsInN1Ym1pdEZvcm0iLCIkdmFsaWQiLCJ1cGRhdGVJdGVtIiwiZXhwYW5kZWQiLCJjbG9zZSIsImNhbmNlbCIsImRpc21pc3MiXSwibWFwcGluZ3MiOiJBQVFBLElBQUFBLElBQUFDLFFBQUFDLE9BQUEsa0JBQ0EsVUFBQSxXQUFBLGlCQUlBRixJQUFBRyxRQUFBLG9CQUFBLFNBQUFDLG1CQUNBQSxrQkFBQUMsV0FBQSxPQUdBTCxJQUFBRyxRQUFBLG9CQUFBLFNBQUFHLG1CQUNBQSxrQkFBQUMsUUFBQUMsWUFBQSxPQUNBRixrQkFBQUMsUUFBQUUsY0FBQSxVQU1BVCxJQUFBRyxRQUFBLGlCQUFBLFNBQUFPLGdCQUNBQSxlQUVBQyxLQUFBLEtBQ0FDLFlBQUEscUJBQ0FDLFdBQUEsYUFJQUYsS0FBQSxVQUNBQyxZQUFBLHNCQUNBQyxXQUFBLGNBR0FGLEtBQUEsYUFDQUMsWUFBQSx5QkFDQUMsV0FBQSxpQkFHQUMsVUFBQSxR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LGVBRUEvRSxRQUFBYyxJQUFBLGdDQUlBRCxPQUFBbUUsT0FBQSxXQUNBZCxrQkFBQWUsUUFBQSxXQUdBcEUsT0FBQWdFLFdBQUEsU0FBQWhHLEtBQ0EsR0FBQUEsSUFDQSxJQUFBLElBQUFRLEVBQUEsRUFBQUEsRUFBQVIsSUFBQThCLE9BQUF0QixJQUFBLENBQ0EsSUFBQXdFLE9BQUFoRixJQUFBUSxHQUNBLEdBQUF3RSxRQUFBQSxPQUFBN0YsTUFBQTZDLE9BQUF3RCxRQUFBLENBQ0FSLE9BQUE3RixLQUFBNkMsT0FBQXVELFFBQUFFLEtBQ0FULE9BQUF2QyxNQUFBVCxPQUFBdUQsUUFBQUcsTUFDQVYsT0FBQXRDLE1BQUFWLE9BQUF1RCxRQUFBSSxNQUNBWCxPQUFBcEMsWUFBQVosT0FBQXVELFFBQUFLLFlBQ0EsTUFDQVosT0FBQWxDLFVBQUFrQyxPQUFBbEMsU0FBQWhCLE9BQUEsR0FDQUUsT0FBQWdFLFdBQUFoQixPQUFBbEMsdUZBYUE5RSxJQUFBYSxXQUFBLFdBQUEsV0FBQXNDLFFBQUFjLElBQUEiLCJmaWxlIjoiYXBwLmpzIiwic291cmNlc0NvbnRlbnQiOlsiLyoqXG4gKiBUcmVhc3lKUyBXZWJBcHBcbiAqIEBhdXRob3IgSm9oc2VmZmVyIDxqb2hzZWZmZXJAZ21haWwuY29tPlxuICovXG5cbi8qKlxuICogTWFpbiBBbmd1bGFySlMgV2ViIEFwcGxpY2F0aW9uXG4gKi9cbnZhciBhcHAgPSBhbmd1bGFyLm1vZHVsZSgndHJlYXN5SlNXZWJBcHAnLCBbXG4gICduZ1JvdXRlJywgJ3RyZWVHcmlkJywgJ3VpLmJvb3RzdHJhcCdcbl0pO1xuXG5cbmFwcC5jb25maWcoWyckbG9jYXRpb25Qcm92aWRlcicsIGZ1bmN0aW9uICgkbG9jYXRpb25Qcm92aWRlcikge1xuICAkbG9jYXRpb25Qcm92aWRlci5oYXNoUHJlZml4KCcnKTtcbn1dKTtcblxuYXBwLmNvbmZpZyhbJyR1aWJNb2RhbFByb3ZpZGVyJywgZnVuY3Rpb24gKCR1aWJNb2RhbFByb3ZpZGVyKSB7XG4gICR1aWJNb2RhbFByb3ZpZGVyLm9wdGlvbnMud2luZG93Q2xhc3MgPSAnc2hvdyc7XG4gICR1aWJNb2RhbFByb3ZpZGVyLm9wdGlvbnMuYmFja2Ryb3BDbGFzcyA9ICdzaG93Jztcbn1dKTtcblxuLyoqXG4gKiBDb25maWd1cmUgdGhlIFJvdXRlc1xuICovXG5hcHAuY29uZmlnKFsnJHJvdXRlUHJvdmlkZXInLCBmdW5jdGlvbiAoJHJvdXRlUHJvdmlkZXIpIHtcbiAgJHJvdXRlUHJvdmlkZXJcbiAgICAvLyBIb21lXG4gICAgLndoZW4oXCIvXCIsIHtcbiAgICAgIHRlbXBsYXRlVXJsOiBcInBhcnRpYWxzL2hvbWUuaHRtbFwiLFxuICAgICAgY29udHJvbGxlcjogXCJQYWdlQ3RybFwiXG4gICAgfSlcbiAgICAvLyBQYWdlc1xuICAgIC8vIC0tIFVzZXJzXG4gICAgLndoZW4oXCIvdXNlcnNcIiwge1xuICAgICAgdGVtcGxhdGVVcmw6IFwicGFydGlhbHMvdXNlcnMuaHRtbFwiLFxuICAgICAgY29udHJvbGxlcjogXCJVc2Vyc0N0cmxcIlxuICAgIH0pXG4gICAgLy8gLS0gUHJvZHVjdHNcbiAgICAud2hlbihcIi9wcm9kdWN0c1wiLCB7XG4gICAgICB0ZW1wbGF0ZVVybDogXCJwYXJ0aWFscy9wcm9kdWN0cy5odG1sXCIsXG4gICAgICBjb250cm9sbGVyOiBcIlByb2R1Y3RzQ3RybFwiXG4gICAgfSlcbiAgICAvLyBlbHNlIDQwNFxuICAgIC5vdGhlcndpc2UoXCIvNDA0XCIsIHtcbiAgICAgIHRlbXBsYXRlVXJsOiBcInBhcnRpYWxzLzQwNC5odG1sXCIsXG4gICAgICBjb250cm9sbGVyOiBcIlBhZ2VDdHJsXCJcbiAgICB9KTtcbn1dKTtcblxuYXBwLmZhY3RvcnkoJ0RhdGFEZW1vJywgZnVuY3Rpb24gKCkge1xuICByZXR1cm4ge1xuICAgIGdldERhdGFzOiBmdW5jdGlvbiAoKSB7XG4gICAgICByZXR1cm4gW3tcbiAgICAgICAgJ0RlbW9ncmFwaGljSWQnOiAxLFxuICAgICAgICAnUGFyZW50SWQnOiBudWxsLFxuICAgICAgICAnTmFtZSc6ICdVbml0ZWQgU3RhdGVzIG9mIEFtZXJpY2EnLFxuICAgICAgICAnRGVzY3JpcHRpb24nOiAnVW5pdGVkIFN0YXRlcyBvZiBBbWVyaWNhJyxcbiAgICAgICAgJ0FyZWEnOiA5ODI2Njc1LFxuICAgICAgICAnUG9wdWxhdGlvbic6IDMxODIxMjAwMCxcbiAgICAgICAgJ1RpbWVab25lJzogJ1VUQyAtNSB0byAtMTAnXG4gICAgICB9LCB7XG4gICAgICAgICdEZW1vZ3JhcGhpY0lkJzogMixcbiAgICAgICAgJ1BhcmVudElkJzogMSxcbiAgICAgICAgJ05hbWUnOiAnQ2FsaWZvcm5pYScsXG4gICAgICAgICdEZXNjcmlwdGlvbic6ICdUaGUgVGVjaCBTdGF0ZScsXG4gICAgICAgICdBcmVhJzogNDIzOTcwLFxuICAgICAgICAnUG9wdWxhdGlvbic6IDM4MzQwMDAwLFxuICAgICAgICAnVGltZVpvbmUnOiAnUGFjaWZpYyBUaW1lJ1xuICAgICAgfSwge1xuICAgICAgICAnRGVtb2dyYXBoaWNJZCc6IDMsXG4gICAgICAgICdQYXJlbnRJZCc6IDIsXG4gICAgICAgICdOYW1lJzogJ1NhbiBGcmFuY2lzY28nLFxuICAgICAgICAnRGVzY3JpcHRpb24nOiAnVGhlIGhhcHBlbmluZyBjaXR5JyxcbiAgICAgICAgJ0FyZWEnOiAyMzEsXG4gICAgICAgICdQb3B1bGF0aW9uJzogODM3NDQyLFxuICAgICAgICAnVGltZVpvbmUnOiAnUFNUJ1xuICAgICAgfSwge1xuICAgICAgICAnRGVtb2dyYXBoaWNJZCc6IDQsXG4gICAgICAgICdQYXJlbnRJZCc6IDIsXG4gICAgICAgICdOYW1lJzogJ0xvcyBBbmdlbGVzJyxcbiAgICAgICAgJ0Rlc2NyaXB0aW9uJzogJ0Rpc2NvIGNpdHknLFxuICAgICAgICAnQXJlYSc6IDUwMyxcbiAgICAgICAgJ1BvcHVsYXRpb24nOiAzOTA0NjU3LFxuICAgICAgICAnVGltZVpvbmUnOiAnUFNUJ1xuICAgICAgfSwge1xuICAgICAgICAnRGVtb2dyYXBoaWNJZCc6IDUsXG4gICAgICAgICdQYXJlbnRJZCc6IDEsXG4gICAgICAgICdOYW1lJzogJ0lsbGlub2lzJyxcbiAgICAgICAgJ0Rlc2NyaXB0aW9uJzogJ05vdCBzbyBjb29sJyxcbiAgICAgICAgJ0FyZWEnOiA1NzkxNCxcbiAgICAgICAgJ1BvcHVsYXRpb24nOiAxMjg4MjEzNSxcbiAgICAgICAgJ1RpbWVab25lJzogJ0NlbnRyYWwgVGltZSBab25lJ1xuICAgICAgfSwge1xuICAgICAgICAnRGVtb2dyYXBoaWNJZCc6IDYsXG4gICAgICAgICdQYXJlbnRJZCc6IDUsXG4gICAgICAgICdOYW1lJzogJ0NoaWNhZ28nLFxuICAgICAgICAnRGVzY3JpcHRpb24nOiAnRmluYW5jaWFsIENpdHknLFxuICAgICAgICAnQXJlYSc6IDIzNCxcbiAgICAgICAgJ1BvcHVsYXRpb24nOiAyNjk1NTk4LFxuICAgICAgICAnVGltZVpvbmUnOiAnQ1NUJ1xuICAgICAgfSwge1xuICAgICAgICAnRGVtb2dyYXBoaWNJZCc6IDcsXG4gICAgICAgICdQYXJlbnRJZCc6IDEsXG4gICAgICAgICdOYW1lJzogJ1RleGFzJyxcbiAgICAgICAgJ0Rlc2NyaXB0aW9uJzogJ1JhbmNlcywgT2lsICYgR2FzJyxcbiAgICAgICAgJ0FyZWEnOiAyNjg1ODEsXG4gICAgICAgICdQb3B1bGF0aW9uJzogMjY0NDgxOTMsXG4gICAgICAgICdUaW1lWm9uZSc6ICdNb3VudGFpbidcbiAgICAgIH0sIHtcbiAgICAgICAgJ0RlbW9ncmFwaGljSWQnOiA4LFxuICAgICAgICAnUGFyZW50SWQnOiAxLFxuICAgICAgICAnTmFtZSc6ICdOZXcgWW9yaycsXG4gICAgICAgICdEZXNjcmlwdGlvbic6ICdUaGUgbGFyZ2VzdCBkaXZlcnNlIGNpdHknLFxuICAgICAgICAnQXJlYSc6IDE0MTMwMCxcbiAgICAgICAgJ1BvcHVsYXRpb24nOiAxOTY1MTEyNyxcbiAgICAgICAgJ1RpbWVab25lJzogJ0Vhc3Rlcm4gVGltZSBab25lJ1xuICAgICAgfSwge1xuICAgICAgICAnRGVtb2dyYXBoaWNJZCc6IDE0LFxuICAgICAgICAnUGFyZW50SWQnOiA4LFxuICAgICAgICAnTmFtZSc6ICdNYW5oYXR0YW4nLFxuICAgICAgICAnRGVzY3JpcHRpb24nOiAnVGltZSBTcXVhcmUgaXMgdGhlIHBsYWNlJyxcbiAgICAgICAgJ0FyZWEnOiAyNjkuNDAzLFxuICAgICAgICAnUG9wdWxhdGlvbic6IDAsXG4gICAgICAgICdUaW1lWm9uZSc6ICdFU1QnXG4gICAgICB9LCB7XG4gICAgICAgICdEZW1vZ3JhcGhpY0lkJzogMTUsXG4gICAgICAgICdQYXJlbnRJZCc6IDE0LFxuICAgICAgICAnTmFtZSc6ICdNYW5oYXR0YW4gQ2l0eScsXG4gICAgICAgICdEZXNjcmlwdGlvbic6ICdNYW5oYXR0YW4gaXNsYW5kJyxcbiAgICAgICAgJ0FyZWEnOiAzMy43NyxcbiAgICAgICAgJ1BvcHVsYXRpb24nOiAwLFxuICAgICAgICAnVGltZVpvbmUnOiAnRVNUJ1xuICAgICAgfSwge1xuICAgICAgICAnRGVtb2dyYXBoaWNJZCc6IDE2LFxuICAgICAgICAnUGFyZW50SWQnOiAxNCxcbiAgICAgICAgJ05hbWUnOiAnVGltZSBTcXVhcmUnLFxuICAgICAgICAnRGVzY3JpcHRpb24nOiAnVGltZSBTcXVhcmUgZm9yIG5ldyB5ZWFyJyxcbiAgICAgICAgJ0FyZWEnOiAyNjkuNDAsXG4gICAgICAgICdQb3B1bGF0aW9uJzogMCxcbiAgICAgICAgJ1RpbWVab25lJzogJ0VTVCdcbiAgICAgIH0sIHtcbiAgICAgICAgJ0RlbW9ncmFwaGljSWQnOiAxNyxcbiAgICAgICAgJ1BhcmVudElkJzogOCxcbiAgICAgICAgJ05hbWUnOiAnTmlhZ3JhIHdhdGVyIGZhbGwnLFxuICAgICAgICAnRGVzY3JpcHRpb24nOiAnQ2xvc2UgdG8gQ2FuYWRhJyxcbiAgICAgICAgJ0FyZWEnOiA2NS43LFxuICAgICAgICAnUG9wdWxhdGlvbic6IDAsXG4gICAgICAgICdUaW1lWm9uZSc6ICdFU1QnXG4gICAgICB9LCB7XG4gICAgICAgICdEZW1vZ3JhcGhpY0lkJzogMTgsXG4gICAgICAgICdQYXJlbnRJZCc6IDgsXG4gICAgICAgICdOYW1lJzogJ0xvbmcgSXNsYW5kJyxcbiAgICAgICAgJ0Rlc2NyaXB0aW9uJzogJ0hhcmJvdXIgdG8gQXRsYW50aWMnLFxuICAgICAgICAnQXJlYSc6IDM2Mi45LFxuICAgICAgICAnUG9wdWxhdGlvbic6IDAsXG4gICAgICAgICdUaW1lWm9uZSc6ICdFU1QnXG4gICAgICB9LCB7XG4gICAgICAgICdEZW1vZ3JhcGhpY0lkJzogNTEsXG4gICAgICAgICdQYXJlbnRJZCc6IDEsXG4gICAgICAgICdOYW1lJzogJ0FsbF9PdGhlcicsXG4gICAgICAgICdEZXNjcmlwdGlvbic6ICdBbGxfT3RoZXIgZGVtb2dyYXBoaWNzJyxcbiAgICAgICAgJ0FyZWEnOiAwLFxuICAgICAgICAnUG9wdWxhdGlvbic6IDAsXG4gICAgICAgICdUaW1lWm9uZSc6IDBcbiAgICAgIH0sIHtcbiAgICAgICAgJ0RlbW9ncmFwaGljSWQnOiAyMDEsXG4gICAgICAgICdQYXJlbnRJZCc6IG51bGwsXG4gICAgICAgICdOYW1lJzogJ0luZGlhJyxcbiAgICAgICAgJ0Rlc2NyaXB0aW9uJzogJ0h5ZHJhYmFkIHRlY2ggY2l0eScsXG4gICAgICAgICdBcmVhJzogOTgyNjY3NSxcbiAgICAgICAgJ1BvcHVsYXRpb24nOiAzMTgyMTIwMDAsXG4gICAgICAgICdUaW1lWm9uZSc6ICdJU1QnXG4gICAgICB9LCB7XG4gICAgICAgICdEZW1vZ3JhcGhpY0lkJzogMzAxLFxuICAgICAgICAnUGFyZW50SWQnOiBudWxsLFxuICAgICAgICAnTmFtZSc6ICdCYW5nbGFkZXNoJyxcbiAgICAgICAgJ0Rlc2NyaXB0aW9uJzogJ0NvdW50cnkgb2YgbG92ZScsXG4gICAgICAgICdBcmVhJzogOTgyNjY3NSxcbiAgICAgICAgJ1BvcHVsYXRpb24nOiAzMTgyMTIwMDAsXG4gICAgICAgICdUaW1lWm9uZSc6ICdCU1QnXG4gICAgICB9XTtcbiAgICB9LFxuICAgIGdldEJpZ0RhdGE6IGZ1bmN0aW9uIChzYW1wbGUsIG51bWJlciwgZGVwdE1heCwgZm4sIGtleUlkLCBrZXlQYXJlbnQpIHtcblxuICAgICAgZnVuY3Rpb24gZm9yRGVwdChvYmosIGZuLCBvcHQsIGRlcHRQYXJlbnQpIHtcbiAgICAgICAgJ3VzZSBzdHJpY3QnO1xuICAgICAgICB2YXIgY2hpbGRzID0gW10sXG4gICAgICAgICAgZGF0YSwgd2lkdGg7XG5cbiAgICAgICAgaWYgKGFuZ3VsYXIuaXNGdW5jdGlvbihmbikpIHtcbiAgICAgICAgICB3aWR0aCA9IGdldFJhbmRvbUludCgyLCA2KTtcbiAgICAgICAgICBmb3IgKHZhciBpID0gMTsgaSA8IHdpZHRoICYmIG9wdC5hbW91bnQgPD0gb3B0LmxpbWl0OyBpKyspIHtcbiAgICAgICAgICAgIG9wdC5hbW91bnQrKztcbiAgICAgICAgICAgIGRhdGEgPSBmbihvYmosIGFuZ3VsYXIuY29weShvYmopLCBvcHQpO1xuXG4gICAgICAgICAgICAvLyByYW5kb20gY2hpbGRyZW5cbiAgICAgICAgICAgIGlmIChkZXB0UGFyZW50IDwgb3B0LmRlcHRNYXggJiYgZ2V0UmFuZG9tSW50KC0yLCAyKSA+IDApIHtcbiAgICAgICAgICAgICAgZm9yRGVwdChkYXRhLCBmbiwgb3B0LCArK2RlcHRQYXJlbnQpO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBjaGlsZHMucHVzaChkYXRhKTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICBvYmouX19jaGlsZHJlbl9fID0gY2hpbGRzO1xuICAgICAgICByZXR1cm4gb2JqO1xuICAgICAgfVxuXG4gICAgICBmdW5jdGlvbiBnZXRSYW5kb21JbnQobWluLCBtYXgpIHtcbiAgICAgICAgcmV0dXJuIE1hdGguZmxvb3IoTWF0aC5yYW5kb20oKSAqIChtYXggLSBtaW4pKSArIG1pbjtcbiAgICAgIH1cblxuICAgICAgY29uc29sZS50aW1lKCdHZW5lcmF0ZV9CaWdEYXRhJyk7XG4gICAgICB2YXIgZGF0YSA9IFtdLFxuICAgICAgICBvcHQgPSB7XG4gICAgICAgICAgYW1vdW50OiAwLFxuICAgICAgICAgIGRlcHRNYXg6IGRlcHRNYXgsXG4gICAgICAgICAgbGltaXQ6IG51bWJlclxuICAgICAgICB9LFxuICAgICAgICBwYXRlcm4sXG4gICAgICAgIGZuR2VuZXJhdGUgPSBmbiB8fCBmdW5jdGlvbiAocGFyZW50LCBjbG9uZWQsIF9vcHQpIHtcbiAgICAgICAgICAndXNlIHN0cmljdCc7XG4gICAgICAgICAgdmFyIGtleU8gPSBPYmplY3Qua2V5cyhjbG9uZWQpLFxuICAgICAgICAgICAgbGVuTyA9IGtleU8ubGVuZ3RoO1xuICAgICAgICAgIGlmIChrZXlQYXJlbnQpIHtcbiAgICAgICAgICAgIGNsb25lZFtrZXlQYXJlbnRdID0gcGFyZW50ICYmIHBhcmVudFtrZXlJZF0gfHwgbnVsbDtcbiAgICAgICAgICB9XG5cbiAgICAgICAgICBjbG9uZWRba2V5SWRdID0gX29wdC5hbW91bnQ7XG5cbiAgICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IGxlbk87IGkrKykge1xuICAgICAgICAgICAgaWYgKGtleU9baV0gIT09IGtleVBhcmVudCAmJiBrZXlPW2ldICE9PSBrZXlJZCkge1xuICAgICAgICAgICAgICBjbG9uZWRba2V5T1tpXV0gKz0gJyMnICsgX29wdC5hbW91bnQ7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuXG4gICAgICAgICAgcmV0dXJuIGNsb25lZDtcbiAgICAgICAgfTtcblxuXG4gICAgICB3aGlsZSAob3B0LmFtb3VudCA8IG51bWJlcikge1xuICAgICAgICBvcHQuYW1vdW50Kys7XG4gICAgICAgIHBhdGVybiA9IGZuR2VuZXJhdGUobnVsbCwgYW5ndWxhci5jb3B5KHNhbXBsZSksIG9wdCk7XG4gICAgICAgIGRhdGEucHVzaChmb3JEZXB0KHBhdGVybiwgZm5HZW5lcmF0ZSwgb3B0LCAxKSk7XG4gICAgICB9XG5cbiAgICAgIGNvbnNvbGUudGltZUVuZCgnR2VuZXJhdGVfQmlnRGF0YScpO1xuICAgICAgcmV0dXJuIGRhdGE7XG4gICAgfVxuICB9O1xufSk7XG5cbi8qKlxuICogQ29udHJvbHMgdGhlIEJsb2dcbiAqL1xuYXBwLmNvbnRyb2xsZXIoJ1VzZXJzQ3RybCcsIGZ1bmN0aW9uICgkc2NvcGUgLyosICRsb2NhdGlvbiwgJGh0dHAgKi8gKSB7XG4gIGNvbnNvbGUubG9nKFwiVXNlcnMgQ29udHJvbGxlciByZXBvcnRpbmcgZm9yIGR1dHkuXCIpO1xufSk7XG5cbmFwcC5jb250cm9sbGVyKCdQcm9kdWN0c0N0cmwnLCBbXG4gICckc2NvcGUnLCAnJHVpYk1vZGFsJywgJyRmaWx0ZXInLCAnJHRpbWVvdXQnLFxuICBmdW5jdGlvbiAoJHNjb3BlLCAkdWliTW9kYWwsICRmaWx0ZXIsICR0aW1lb3V0LCBEYXRhRGVtbykge1xuXG4gICAgJHNjb3BlLnByb2R1Y3RzX3RyZWVncmlkID0ge307XG5cbiAgICAkc2NvcGUuZmlsdGVyU3RyaW5nID0gXCJcIjtcblxuICAgICRzY29wZS5nZXRUcmVlRGF0YSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgIHJldHVybiBbe1xuICAgICAgICAgIE5hbWU6IFwiQ2Fsw6dhc1wiLFxuICAgICAgICAgIFZhbHVlOiA0MDAwLjAwLFxuICAgICAgICAgIFF1YW50OiAyMCxcbiAgICAgICAgICB2aXNpYmxlOiB0cnVlLFxuICAgICAgICAgIE9ic2VydmF0aW9uOiBcIm9icy4uLlwiLFxuICAgICAgICAgIGxldmVsOiAxLFxuICAgICAgICAgIGNoaWxkcmVuOiBbe1xuICAgICAgICAgICAgICBOYW1lOiBcIiAgIENhbMOnYSBKZWFuc1wiLFxuICAgICAgICAgICAgICBWYWx1ZTogMjAwLjAwLFxuICAgICAgICAgICAgICBRdWFudDogMTAsXG4gICAgICAgICAgICAgIHZpc2libGU6IHRydWUsXG4gICAgICAgICAgICAgIE9ic2VydmF0aW9uOiBcIm9icy4uLlwiLFxuICAgICAgICAgICAgICBsZXZlbDogMixcbiAgICAgICAgICAgICAgY2hpbGRyZW46IFt7XG4gICAgICAgICAgICAgICAgICBOYW1lOiBcIi0gICAgIENhbMOnYSBKZWFucyBQXCIsXG4gICAgICAgICAgICAgICAgICBWYWx1ZTogMjAwLjAwLFxuICAgICAgICAgICAgICAgICAgUXVhbnQ6IDEwLFxuICAgICAgICAgICAgICAgICAgdmlzaWJsZTogdHJ1ZSxcbiAgICAgICAgICAgICAgICAgIE9ic2VydmF0aW9uOiBcIm9icy4uLlwiLFxuICAgICAgICAgICAgICAgICAgbGV2ZWw6IDMsXG4gICAgICAgICAgICAgICAgICBpY29uczoge1xuICAgICAgICAgICAgICAgICAgICBpY29uTGVhZjogXCJmYSBmYS1jaXJjbGUtb1wiLFxuICAgICAgICAgICAgICAgICAgICBpY29uQ29sbGFwc2U6IFwiZmEgZmEtbWludXNcIixcbiAgICAgICAgICAgICAgICAgICAgaWNvbkV4cGFuZDogXCJmYSBmYS1wbHVzXCJcbiAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgIE5hbWU6IFwiLSAgICAgQ2Fsw6dhIEplYW5zIE1cIixcbiAgICAgICAgICAgICAgICAgIFZhbHVlOiAyMDAuMDAsXG4gICAgICAgICAgICAgICAgICBRdWFudDogMTAsXG4gICAgICAgICAgICAgICAgICB2aXNpYmxlOiB0cnVlLFxuICAgICAgICAgICAgICAgICAgT2JzZXJ2YXRpb246IFwib2JzLi4uXCIsXG4gICAgICAgICAgICAgICAgICBsZXZlbDogMyxcbiAgICAgICAgICAgICAgICAgIGljb25zOiB7XG4gICAgICAgICAgICAgICAgICAgIGljb25MZWFmOiBcImZhIGZhLWNpcmNsZS1vXCIsXG4gICAgICAgICAgICAgICAgICAgIGljb25Db2xsYXBzZTogXCJmYSBmYS1taW51c1wiLFxuICAgICAgICAgICAgICAgICAgICBpY29uRXhwYW5kOiBcImZhIGZhLXBsdXNcIlxuICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgTmFtZTogXCItICAgICBDYWzDp2EgSmVhbnMgR1wiLFxuICAgICAgICAgICAgICAgICAgVmFsdWU6IDIwMC4wMCxcbiAgICAgICAgICAgICAgICAgIFF1YW50OiAxMCxcbiAgICAgICAgICAgICAgICAgIHZpc2libGU6IHRydWUsXG4gICAgICAgICAgICAgICAgICBPYnNlcnZhdGlvbjogXCJvYnMuLi5cIixcbiAgICAgICAgICAgICAgICAgIGxldmVsOiAzLFxuICAgICAgICAgICAgICAgICAgaWNvbnM6IHtcbiAgICAgICAgICAgICAgICAgICAgaWNvbkxlYWY6IFwiZmEgZmEtY2lyY2xlLW9cIixcbiAgICAgICAgICAgICAgICAgICAgaWNvbkNvbGxhcHNlOiBcImZhIGZhLW1pbnVzXCIsXG4gICAgICAgICAgICAgICAgICAgIGljb25FeHBhbmQ6IFwiZmEgZmEtcGx1c1wiXG4gICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICBdLFxuICAgICAgICAgICAgICBpY29uczoge1xuICAgICAgICAgICAgICAgIGljb25MZWFmOiBcImZhIGZhLWNpcmNsZS1vXCIsXG4gICAgICAgICAgICAgICAgaWNvbkNvbGxhcHNlOiBcImZhIGZhLW1pbnVzXCIsXG4gICAgICAgICAgICAgICAgaWNvbkV4cGFuZDogXCJmYSBmYS1wbHVzXCJcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgTmFtZTogXCIgICBDYWzDp2EgTW9sZXRvblwiLFxuICAgICAgICAgICAgICBWYWx1ZTogMjAwLjAwLFxuICAgICAgICAgICAgICBRdWFudDogMTAsXG4gICAgICAgICAgICAgIHZpc2libGU6IHRydWUsXG4gICAgICAgICAgICAgIE9ic2VydmF0aW9uOiBcIm9icy4uLlwiLFxuICAgICAgICAgICAgICBsZXZlbDogMixcbiAgICAgICAgICAgICAgY2hpbGRyZW46IFt7XG4gICAgICAgICAgICAgICAgICBOYW1lOiBcIi0gICAgIENhbMOnYSBNb2xldG9uIFBcIixcbiAgICAgICAgICAgICAgICAgIFZhbHVlOiAyMDAuMDAsXG4gICAgICAgICAgICAgICAgICBRdWFudDogMTAsXG4gICAgICAgICAgICAgICAgICB2aXNpYmxlOiB0cnVlLFxuICAgICAgICAgICAgICAgICAgT2JzZXJ2YXRpb246IFwib2JzLi4uXCIsXG4gICAgICAgICAgICAgICAgICBsZXZlbDogMyxcbiAgICAgICAgICAgICAgICAgIGljb25zOiB7XG4gICAgICAgICAgICAgICAgICAgIGljb25MZWFmOiBcImZhIGZhLWNpcmNsZS1vXCIsXG4gICAgICAgICAgICAgICAgICAgIGljb25Db2xsYXBzZTogXCJmYSBmYS1taW51c1wiLFxuICAgICAgICAgICAgICAgICAgICBpY29uRXhwYW5kOiBcImZhIGZhLXBsdXNcIlxuICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgTmFtZTogXCItICAgICBDYWzDp2EgTW9sZXRvbiBNXCIsXG4gICAgICAgICAgICAgICAgICBWYWx1ZTogMjAwLjAwLFxuICAgICAgICAgICAgICAgICAgUXVhbnQ6IDEwLFxuICAgICAgICAgICAgICAgICAgdmlzaWJsZTogdHJ1ZSxcbiAgICAgICAgICAgICAgICAgIE9ic2VydmF0aW9uOiBcIm9icy4uLlwiLFxuICAgICAgICAgICAgICAgICAgbGV2ZWw6IDMsXG4gICAgICAgICAgICAgICAgICBpY29uczoge1xuICAgICAgICAgICAgICAgICAgICBpY29uTGVhZjogXCJmYSBmYS1jaXJjbGUtb1wiLFxuICAgICAgICAgICAgICAgICAgICBpY29uQ29sbGFwc2U6IFwiZmEgZmEtbWludXNcIixcbiAgICAgICAgICAgICAgICAgICAgaWNvbkV4cGFuZDogXCJmYSBmYS1wbHVzXCJcbiAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgIE5hbWU6IFwiLSAgICAgQ2Fsw6dhIE1vbGV0b24gR1wiLFxuICAgICAgICAgICAgICAgICAgVmFsdWU6IDIwMC4wMCxcbiAgICAgICAgICAgICAgICAgIFF1YW50OiAxMCxcbiAgICAgICAgICAgICAgICAgIHZpc2libGU6IHRydWUsXG4gICAgICAgICAgICAgICAgICBPYnNlcnZhdGlvbjogXCJvYnMuLi5cIixcbiAgICAgICAgICAgICAgICAgIGxldmVsOiAzLFxuICAgICAgICAgICAgICAgICAgaWNvbnM6IHtcbiAgICAgICAgICAgICAgICAgICAgaWNvbkxlYWY6IFwiZmEgZmEtY2lyY2xlLW9cIixcbiAgICAgICAgICAgICAgICAgICAgaWNvbkNvbGxhcHNlOiBcImZhIGZhLW1pbnVzXCIsXG4gICAgICAgICAgICAgICAgICAgIGljb25FeHBhbmQ6IFwiZmEgZmEtcGx1c1wiXG4gICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICBdLFxuICAgICAgICAgICAgICBpY29uczoge1xuICAgICAgICAgICAgICAgIGljb25MZWFmOiBcImZhIGZhLWNpcmNsZS1vXCIsXG4gICAgICAgICAgICAgICAgaWNvbkNvbGxhcHNlOiBcImZhIGZhLW1pbnVzXCIsXG4gICAgICAgICAgICAgICAgaWNvbkV4cGFuZDogXCJmYSBmYS1wbHVzXCJcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgIF0sXG4gICAgICAgICAgaWNvbnM6IHtcbiAgICAgICAgICAgIGljb25MZWFmOiBcImZhIGZhLWNpcmNsZS1vXCIsXG4gICAgICAgICAgICBpY29uQ29sbGFwc2U6IFwiZmEgZmEtbWludXNcIixcbiAgICAgICAgICAgIGljb25FeHBhbmQ6IFwiZmEgZmEtcGx1c1wiXG4gICAgICAgICAgfVxuICAgICAgICB9LFxuICAgICAgICB7XG4gICAgICAgICAgTmFtZTogXCJCZXJtdWRhc1wiLFxuICAgICAgICAgIFZhbHVlOiA5OTkuODAsXG4gICAgICAgICAgUXVhbnQ6IDIwLFxuICAgICAgICAgIHZpc2libGU6IHRydWUsXG4gICAgICAgICAgT2JzZXJ2YXRpb246IFwib2JzLi4uXCIsXG4gICAgICAgICAgbGV2ZWw6IDEsXG4gICAgICAgICAgY2hpbGRyZW46IFt7XG4gICAgICAgICAgICAgIE5hbWU6IFwiQmVybXVkYSBKZWFuc1wiLFxuICAgICAgICAgICAgICBWYWx1ZTogNDkuOTksXG4gICAgICAgICAgICAgIFF1YW50OiAxMCxcbiAgICAgICAgICAgICAgdmlzaWJsZTogdHJ1ZSxcbiAgICAgICAgICAgICAgT2JzZXJ2YXRpb246IFwib2JzLi4uXCIsXG4gICAgICAgICAgICAgIGxldmVsOiAyLFxuICAgICAgICAgICAgICBpY29uczoge1xuICAgICAgICAgICAgICAgIGljb25MZWFmOiBcImZhIGZhLWNpcmNsZS1vXCIsXG4gICAgICAgICAgICAgICAgaWNvbkNvbGxhcHNlOiBcImZhIGZhLW1pbnVzXCIsXG4gICAgICAgICAgICAgICAgaWNvbkV4cGFuZDogXCJmYSBmYS1wbHVzXCJcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgTmFtZTogXCJCZXJtdWRhIFRhY3RlbFwiLFxuICAgICAgICAgICAgICBWYWx1ZTogNDkuOTksXG4gICAgICAgICAgICAgIFF1YW50OiAxMCxcbiAgICAgICAgICAgICAgdmlzaWJsZTogdHJ1ZSxcbiAgICAgICAgICAgICAgT2JzZXJ2YXRpb246IFwib2JzLi4uXCIsXG4gICAgICAgICAgICAgIGxldmVsOiAyLFxuICAgICAgICAgICAgICBpY29uczoge1xuICAgICAgICAgICAgICAgIGljb25MZWFmOiBcImZhIGZhLWNpcmNsZS1vXCIsXG4gICAgICAgICAgICAgICAgaWNvbkNvbGxhcHNlOiBcImZhIGZhLW1pbnVzXCIsXG4gICAgICAgICAgICAgICAgaWNvbkV4cGFuZDogXCJmYSBmYS1wbHVzXCJcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgIF0sXG4gICAgICAgICAgaWNvbnM6IHtcbiAgICAgICAgICAgIGljb25MZWFmOiBcImZhIGZhLWNpcmNsZS1vXCIsXG4gICAgICAgICAgICBpY29uQ29sbGFwc2U6IFwiZmEgZmEtbWludXNcIixcbiAgICAgICAgICAgIGljb25FeHBhbmQ6IFwiZmEgZmEtcGx1c1wiXG4gICAgICAgICAgfVxuICAgICAgICB9LFxuICAgICAgICB7XG4gICAgICAgICAgTmFtZTogXCJDYW1pc2V0YXNcIixcbiAgICAgICAgICBWYWx1ZTogMTc5OS45LFxuICAgICAgICAgIFF1YW50OiAzMCxcbiAgICAgICAgICB2aXNpYmxlOiB0cnVlLFxuICAgICAgICAgIE9ic2VydmF0aW9uOiBcIm9icy4uLlwiLFxuICAgICAgICAgIGxldmVsOiAxLFxuICAgICAgICAgIGNoaWxkcmVuOiBbe1xuICAgICAgICAgICAgICBOYW1lOiBcIkNhbWlzZXRhIFJlZ2F0YVwiLFxuICAgICAgICAgICAgICBWYWx1ZTogMzkuOTksXG4gICAgICAgICAgICAgIFF1YW50OiAxMCxcbiAgICAgICAgICAgICAgdmlzaWJsZTogdHJ1ZSxcbiAgICAgICAgICAgICAgT2JzZXJ2YXRpb246IFwib2JzLi4uXCIsXG4gICAgICAgICAgICAgIGxldmVsOiAyLFxuICAgICAgICAgICAgICBpY29uczoge1xuICAgICAgICAgICAgICAgIGljb25MZWFmOiBcImZhIGZhLWNpcmNsZS1vXCIsXG4gICAgICAgICAgICAgICAgaWNvbkNvbGxhcHNlOiBcImZhIGZhLW1pbnVzXCIsXG4gICAgICAgICAgICAgICAgaWNvbkV4cGFuZDogXCJmYSBmYS1wbHVzXCJcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgTmFtZTogXCJDYW1pc2V0YSBFc3RhbXBhZGFcIixcbiAgICAgICAgICAgICAgVmFsdWU6IDQ5Ljk5LFxuICAgICAgICAgICAgICBRdWFudDogMTAsXG4gICAgICAgICAgICAgIHZpc2libGU6IHRydWUsXG4gICAgICAgICAgICAgIE9ic2VydmF0aW9uOiBcIm9icy4uLlwiLFxuICAgICAgICAgICAgICBsZXZlbDogMixcbiAgICAgICAgICAgICAgaWNvbnM6IHtcbiAgICAgICAgICAgICAgICBpY29uTGVhZjogXCJmYSBmYS1jaXJjbGUtb1wiLFxuICAgICAgICAgICAgICAgIGljb25Db2xsYXBzZTogXCJmYSBmYS1taW51c1wiLFxuICAgICAgICAgICAgICAgIGljb25FeHBhbmQ6IFwiZmEgZmEtcGx1c1wiXG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICB7XG4gICAgICAgICAgICAgIE5hbWU6IFwiQ2FtaXNldGEgR29sYSBQb2xvXCIsXG4gICAgICAgICAgICAgIFZhbHVlOiA2OS45OSxcbiAgICAgICAgICAgICAgUXVhbnQ6IDEwLFxuICAgICAgICAgICAgICB2aXNpYmxlOiB0cnVlLFxuICAgICAgICAgICAgICBPYnNlcnZhdGlvbjogXCJvYnMuLi5cIixcbiAgICAgICAgICAgICAgbGV2ZWw6IDIsXG4gICAgICAgICAgICAgIGljb25zOiB7XG4gICAgICAgICAgICAgICAgaWNvbkxlYWY6IFwiZmEgZmEtY2lyY2xlLW9cIixcbiAgICAgICAgICAgICAgICBpY29uQ29sbGFwc2U6IFwiZmEgZmEtbWludXNcIixcbiAgICAgICAgICAgICAgICBpY29uRXhwYW5kOiBcImZhIGZhLXBsdXNcIlxuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgXSxcbiAgICAgICAgICBpY29uczoge1xuICAgICAgICAgICAgaWNvbkxlYWY6IFwiZmEgZmEtY2lyY2xlLW9cIixcbiAgICAgICAgICAgIGljb25Db2xsYXBzZTogXCJmYSBmYS1taW51c1wiLFxuICAgICAgICAgICAgaWNvbkV4cGFuZDogXCJmYSBmYS1wbHVzXCJcbiAgICAgICAgICB9XG4gICAgICAgIH0sXG4gICAgICAgIHtcbiAgICAgICAgICBOYW1lOiBcIkNhbWlzYXNcIixcbiAgICAgICAgICBWYWx1ZTogMjI5OS44LFxuICAgICAgICAgIFF1YW50OiAyMCxcbiAgICAgICAgICB2aXNpYmxlOiB0cnVlLFxuICAgICAgICAgIE9ic2VydmF0aW9uOiBcIm9icy4uLlwiLFxuICAgICAgICAgIGxldmVsOiAxLFxuICAgICAgICAgIFRpbWVab25lOiBcIk1vdW50YWluXCIsXG4gICAgICAgICAgY2hpbGRyZW46IFt7XG4gICAgICAgICAgICAgIE5hbWU6IFwiQ2FtaXNhIEplYW5zXCIsXG4gICAgICAgICAgICAgIFZhbHVlOiA5OS45OSxcbiAgICAgICAgICAgICAgUXVhbnQ6IDEwLFxuICAgICAgICAgICAgICB2aXNpYmxlOiB0cnVlLFxuICAgICAgICAgICAgICBPYnNlcnZhdGlvbjogXCJvYnMuLi5cIixcbiAgICAgICAgICAgICAgbGV2ZWw6IDIsXG4gICAgICAgICAgICAgIGljb25zOiB7XG4gICAgICAgICAgICAgICAgaWNvbkxlYWY6IFwiZmEgZmEtY2lyY2xlLW9cIixcbiAgICAgICAgICAgICAgICBpY29uQ29sbGFwc2U6IFwiZmEgZmEtbWludXNcIixcbiAgICAgICAgICAgICAgICBpY29uRXhwYW5kOiBcImZhIGZhLXBsdXNcIlxuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAge1xuICAgICAgICAgICAgICBOYW1lOiBcIkNhbWlzYSBMaW5ob1wiLFxuICAgICAgICAgICAgICBWYWx1ZTogMTI5Ljk5LFxuICAgICAgICAgICAgICBRdWFudDogMTAsXG4gICAgICAgICAgICAgIHZpc2libGU6IHRydWUsXG4gICAgICAgICAgICAgIE9ic2VydmF0aW9uOiBcIm9icy4uLlwiLFxuICAgICAgICAgICAgICBsZXZlbDogMixcbiAgICAgICAgICAgICAgaWNvbnM6IHtcbiAgICAgICAgICAgICAgICBpY29uTGVhZjogXCJmYSBmYS1jaXJjbGUtb1wiLFxuICAgICAgICAgICAgICAgIGljb25Db2xsYXBzZTogXCJmYSBmYS1taW51c1wiLFxuICAgICAgICAgICAgICAgIGljb25FeHBhbmQ6IFwiZmEgZmEtcGx1c1wiXG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICBdLFxuICAgICAgICAgIGljb25zOiB7XG4gICAgICAgICAgICBpY29uTGVhZjogXCJmYSBmYS1jaXJjbGUtb1wiLFxuICAgICAgICAgICAgaWNvbkNvbGxhcHNlOiBcImZhIGZhLW1pbnVzXCIsXG4gICAgICAgICAgICBpY29uRXhwYW5kOiBcImZhIGZhLXBsdXNcIlxuICAgICAgICAgIH1cbiAgICAgICAgfSxcbiAgICAgICAge1xuICAgICAgICAgIE5hbWU6IFwiUm91cGFzIEludGltYXNcIixcbiAgICAgICAgICBWYWx1ZTogMTI5OS42LFxuICAgICAgICAgIFF1YW50OiAyMCxcbiAgICAgICAgICB2aXNpYmxlOiB0cnVlLFxuICAgICAgICAgIE9ic2VydmF0aW9uOiBcIm9icy4uLlwiLFxuICAgICAgICAgIGxldmVsOiAxLFxuICAgICAgICAgIGNoaWxkcmVuOiBbe1xuICAgICAgICAgICAgICBOYW1lOiBcIkN1ZWNhIEJveFwiLFxuICAgICAgICAgICAgICBWYWx1ZTogMjkuOTksXG4gICAgICAgICAgICAgIFF1YW50OiAxMCxcbiAgICAgICAgICAgICAgdmlzaWJsZTogdHJ1ZSxcbiAgICAgICAgICAgICAgT2JzZXJ2YXRpb246IFwib2JzLi4uXCIsXG4gICAgICAgICAgICAgIGxldmVsOiAyLFxuICAgICAgICAgICAgICBpY29uczoge1xuICAgICAgICAgICAgICAgIGljb25MZWFmOiBcImZhIGZhLWNpcmNsZS1vXCIsXG4gICAgICAgICAgICAgICAgaWNvbkNvbGxhcHNlOiBcImZhIGZhLW1pbnVzXCIsXG4gICAgICAgICAgICAgICAgaWNvbkV4cGFuZDogXCJmYSBmYS1wbHVzXCJcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgTmFtZTogXCJTdW5nYVwiLFxuICAgICAgICAgICAgICBWYWx1ZTogMjkuOTksXG4gICAgICAgICAgICAgIFF1YW50OiAxMCxcbiAgICAgICAgICAgICAgdmlzaWJsZTogdHJ1ZSxcbiAgICAgICAgICAgICAgT2JzZXJ2YXRpb246IFwib2JzLi4uXCIsXG4gICAgICAgICAgICAgIGxldmVsOiAyLFxuICAgICAgICAgICAgICBpY29uczoge1xuICAgICAgICAgICAgICAgIGljb25MZWFmOiBcImZhIGZhLWNpcmNsZS1vXCIsXG4gICAgICAgICAgICAgICAgaWNvbkNvbGxhcHNlOiBcImZhIGZhLW1pbnVzXCIsXG4gICAgICAgICAgICAgICAgaWNvbkV4cGFuZDogXCJmYSBmYS1wbHVzXCJcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgTmFtZTogXCJDYWxjaW5oYVwiLFxuICAgICAgICAgICAgICBWYWx1ZTogMTkuOTksXG4gICAgICAgICAgICAgIFF1YW50OiAxMCxcbiAgICAgICAgICAgICAgdmlzaWJsZTogdHJ1ZSxcbiAgICAgICAgICAgICAgT2JzZXJ2YXRpb246IFwib2JzLi4uXCIsXG4gICAgICAgICAgICAgIGxldmVsOiAyLFxuICAgICAgICAgICAgICBpY29uczoge1xuICAgICAgICAgICAgICAgIGljb25MZWFmOiBcImZhIGZhLWNpcmNsZS1vXCIsXG4gICAgICAgICAgICAgICAgaWNvbkNvbGxhcHNlOiBcImZhIGZhLW1pbnVzXCIsXG4gICAgICAgICAgICAgICAgaWNvbkV4cGFuZDogXCJmYSBmYS1wbHVzXCJcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgTmFtZTogXCJTdXRpw6NcIixcbiAgICAgICAgICAgICAgVmFsdWU6IDQ5Ljk5LFxuICAgICAgICAgICAgICBRdWFudDogMTAsXG4gICAgICAgICAgICAgIHZpc2libGU6IHRydWUsXG4gICAgICAgICAgICAgIE9ic2VydmF0aW9uOiBcIm9icy4uLlwiLFxuICAgICAgICAgICAgICBsZXZlbDogMixcbiAgICAgICAgICAgICAgaWNvbnM6IHtcbiAgICAgICAgICAgICAgICBpY29uTGVhZjogXCJmYSBmYS1jaXJjbGUtb1wiLFxuICAgICAgICAgICAgICAgIGljb25Db2xsYXBzZTogXCJmYSBmYS1taW51c1wiLFxuICAgICAgICAgICAgICAgIGljb25FeHBhbmQ6IFwiZmEgZmEtcGx1c1wiXG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICBdLFxuICAgICAgICAgIGljb25zOiB7XG4gICAgICAgICAgICBpY29uTGVhZjogXCJmYSBmYS1jaXJjbGUtb1wiLFxuICAgICAgICAgICAgaWNvbkNvbGxhcHNlOiBcImZhIGZhLW1pbnVzXCIsXG4gICAgICAgICAgICBpY29uRXhwYW5kOiBcImZhIGZhLXBsdXNcIlxuICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICBdO1xuICAgIH07XG5cbiAgICAkc2NvcGUudHJlZV9kYXRhID0gJHNjb3BlLmdldFRyZWVEYXRhKCk7XG5cbiAgICAkc2NvcGUuZXhwYW5kaW5nX3Byb3BlcnR5ID0ge1xuICAgICAgZmllbGQ6IFwiTmFtZVwiLFxuICAgICAgZGlzcGxheU5hbWU6IFwiTmFtZVwiLFxuICAgICAgc29ydGFibGU6IHRydWUsXG4gICAgICBmaWx0ZXJhYmxlOiB0cnVlLFxuICAgICAgY2VsbFRlbXBsYXRlOiBcIjxzcGFuPnt7cm93LmJyYW5jaFtleHBhbmRpbmdQcm9wZXJ0eS5maWVsZF19fTwvc3Bhbj5cIlxuICAgIH07XG5cbiAgICAkc2NvcGUuY2hlY2tJZkVudGVyS2V5V2FzUHJlc3NlZCA9IGZ1bmN0aW9uICgkZXZlbnQpIHtcbiAgICAgIHZhciBrZXlDb2RlID0gJGV2ZW50LndoaWNoIHx8ICRldmVudC5rZXlDb2RlO1xuICAgICAgaWYgKGtleUNvZGUgPT09IDEzKSB7XG4gICAgICAgICRzY29wZS5zZWFyY2goKTtcbiAgICAgIH1cbiAgICB9O1xuXG4gICAgJHNjb3BlLnNlYXJjaCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICRzY29wZS50cmVlX2RhdGEgPSAkZmlsdGVyKCdzZWFyY2hGb3InKSgkc2NvcGUuZ2V0VHJlZURhdGEoKSwgJHNjb3BlLmZpbHRlclN0cmluZywgJHNjb3BlLmV4cGFuZGluZ19wcm9wZXJ0eSwgJHNjb3BlLmNvbF9kZWZzLCB0cnVlKTtcbiAgICB9O1xuXG4gICAgJHNjb3BlLmNvbF9kZWZzID0gW3tcbiAgICAgICAgZmllbGQ6IFwiVmFsdWVcIixcbiAgICAgICAgc29ydGFibGU6IHRydWUsXG4gICAgICAgIGNlbGxUZW1wbGF0ZTogXCI8c3Bhbj5SJCB7eyByb3cuYnJhbmNoW2NvbC5maWVsZF0gfX08L3NwYW4+XCIsXG4gICAgICAgIHNvcnRpbmdUeXBlOiBcIm51bWJlclwiXG4gICAgICB9LFxuICAgICAge1xuICAgICAgICBmaWVsZDogXCJRdWFudFwiLFxuICAgICAgICBzb3J0YWJsZTogdHJ1ZSxcbiAgICAgICAgc29ydGluZ1R5cGU6IFwibnVtYmVyXCJcbiAgICAgIH1cbiAgICBdO1xuXG4gICAgJHNjb3BlLm15X3RyZWVfaGFuZGxlciA9IGZ1bmN0aW9uIChpdGVtKSB7XG4gICAgICAkc2NvcGUuc2VsZWN0ZWRJdGVtID0gaXRlbTtcbiAgICB9O1xuXG4gICAgJHNjb3BlLmFkZEZvcm0gPSBmdW5jdGlvbiAoKSB7XG4gICAgICAkc2NvcGUuaXNFZGl0ID0gZmFsc2U7XG5cbiAgICAgIHZhciBtb2RhbEluc3RhbmNlID0gJHVpYk1vZGFsLm9wZW4oe1xuICAgICAgICB0ZW1wbGF0ZVVybDogJy4uL3RlbXBsYXRlcy9tb2RhbC1mb3JtLmh0bWwnLFxuICAgICAgICBjb250cm9sbGVyOiBNb2RhbEluc3RhbmNlQ3RybCxcbiAgICAgICAgc2NvcGU6ICRzY29wZSxcbiAgICAgICAgcmVzb2x2ZToge1xuICAgICAgICAgIHByb2R1Y3RGb3JtOiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICByZXR1cm4gJHNjb3BlLnByb2R1Y3RGb3JtO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfSk7XG5cbiAgICAgIG1vZGFsSW5zdGFuY2UucmVzdWx0LnRoZW4oZnVuY3Rpb24gKHNlbGVjdGVkSXRlbSkge30sIGZ1bmN0aW9uICgpIHtcblxuICAgICAgfSk7XG4gICAgfTtcblxuXG4gICAgJHNjb3BlLmVkaXRGb3JtID0gZnVuY3Rpb24gKCkge1xuICAgICAgJHNjb3BlLmlzRWRpdCA9IHRydWU7XG5cbiAgICAgIGlmICgkc2NvcGUuc2VsZWN0ZWRJdGVtKSB7XG4gICAgICAgIHZhciBtb2RhbEluc3RhbmNlID0gJHVpYk1vZGFsLm9wZW4oe1xuICAgICAgICAgIHRlbXBsYXRlVXJsOiAnLi4vdGVtcGxhdGVzL21vZGFsLWZvcm0uaHRtbCcsXG4gICAgICAgICAgY29udHJvbGxlcjogTW9kYWxJbnN0YW5jZUN0cmwsXG4gICAgICAgICAgc2NvcGU6ICRzY29wZSxcbiAgICAgICAgICByZXNvbHZlOiB7XG4gICAgICAgICAgICBwcm9kdWN0Rm9ybTogZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICByZXR1cm4gJHNjb3BlLnByb2R1Y3RGb3JtO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cbiAgICAgICAgfSk7XG5cbiAgICAgICAgbW9kYWxJbnN0YW5jZS5yZXN1bHQudGhlbihmdW5jdGlvbiAoc2VsZWN0ZWRJdGVtKSB7fSwgZnVuY3Rpb24gKCkge1xuXG4gICAgICAgIH0pO1xuICAgICAgfSBlbHNlXG4gICAgICAgIGFsZXJ0KFwiTsOjbyBow6EgbmVuaHVtIGl0ZW0gc2VsZWNpb25hZG8uXCIpO1xuICAgIH07XG5cbiAgICAkc2NvcGUuZGVsZXRlQ2hpbGQgPSBmdW5jdGlvbiAoaXRlbSkge1xuICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBpdGVtLmNoaWxkcmVuLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgIHZhciBjdXJPYmogPSBpdGVtLmNoaWxkcmVuW2ldO1xuICAgICAgICBpZiAoY3VyT2JqLk5hbWUgPT0gJHNjb3BlLnNlbGVjdGVkSXRlbS5OYW1lKVxuICAgICAgICAgIGl0ZW0uY2hpbGRyZW4uc3BsaWNlKGksIDEpO1xuICAgICAgICBlbHNlIGlmIChjdXJPYmouY2hpbGRyZW4gJiYgY3VyT2JqLmNoaWxkcmVuLmxlbmd0aCA+IDApXG4gICAgICAgICAgJHNjb3BlLmRlbGV0ZUNoaWxkKGN1ck9iaik7XG4gICAgICB9XG4gICAgfTtcblxuICAgICRzY29wZS5kZWxldGVGb3JtID0gZnVuY3Rpb24gKCkge1xuICAgICAgaWYgKCRzY29wZS5zZWxlY3RlZEl0ZW0pIHtcbiAgICAgICAgaWYgKGNvbmZpcm0oXCJEZXNlamEgcmVtb3ZlciBvIGl0ZW0gc2VsZWNpb25hZG8/XCIpKSB7XG4gICAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCB0aGlzLnRyZWVfZGF0YS5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgdmFyIGN1ck9iaiA9IHRoaXMudHJlZV9kYXRhW2ldO1xuICAgICAgICAgICAgaWYgKGN1ck9iai5OYW1lID09ICRzY29wZS5zZWxlY3RlZEl0ZW0uTmFtZSlcbiAgICAgICAgICAgICAgdGhpcy50cmVlX2RhdGEuc3BsaWNlKGksIDEpO1xuICAgICAgICAgICAgZWxzZSBpZiAoY3VyT2JqLmNoaWxkcmVuICYmIGN1ck9iai5jaGlsZHJlbi5sZW5ndGggPiAwKVxuICAgICAgICAgICAgICAkc2NvcGUuZGVsZXRlQ2hpbGQoY3VyT2JqKTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cblxuXG4gICAgICB9IGVsc2VcbiAgICAgICAgYWxlcnQoXCJOw6NvIGjDoSBuZW5odW0gaXRlbSBzZWxlY2lvbmFkby5cIik7XG4gICAgfTtcblxuICAgIHZhciBNb2RhbEluc3RhbmNlQ3RybCA9IGZ1bmN0aW9uICgkc2NvcGUsICR1aWJNb2RhbEluc3RhbmNlLCBwcm9kdWN0Rm9ybSkge1xuICAgICAgJHNjb3BlLmZvcm0gPSB7fTtcbiAgICAgICRzY29wZS5wcm9kdWN0ID0ge307XG4gICAgICAkc2NvcGUub2xkTmFtZSA9IFwiXCI7XG5cbiAgICAgIGlmICgkc2NvcGUuaXNFZGl0ICYmICRzY29wZS5zZWxlY3RlZEl0ZW0pIHtcbiAgICAgICAgJHNjb3BlLm9sZE5hbWUgPSAkc2NvcGUuc2VsZWN0ZWRJdGVtLk5hbWU7XG4gICAgICAgICRzY29wZS5wcm9kdWN0Lm5hbWUgPSAkc2NvcGUuc2VsZWN0ZWRJdGVtLk5hbWU7XG4gICAgICAgICRzY29wZS5wcm9kdWN0LnZhbHVlID0gJHNjb3BlLnNlbGVjdGVkSXRlbS5WYWx1ZTtcbiAgICAgICAgJHNjb3BlLnByb2R1Y3QucXVhbnQgPSAkc2NvcGUuc2VsZWN0ZWRJdGVtLlF1YW50O1xuICAgICAgICAkc2NvcGUucHJvZHVjdC5vYnNlcnZhdGlvbiA9ICRzY29wZS5zZWxlY3RlZEl0ZW0uT2JzZXJ2YXRpb247XG4gICAgICB9XG5cbiAgICAgICRzY29wZS5mb3JtSW5pdCA9IGZ1bmN0aW9uICgpIHt9O1xuXG4gICAgICAkc2NvcGUuc3VibWl0Rm9ybSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgaWYgKCRzY29wZS5mb3JtLnByb2R1Y3RGb3JtLiR2YWxpZCkge1xuXG4gICAgICAgICAgaWYgKCEkc2NvcGUuaXNFZGl0KSB7XG4gICAgICAgICAgICB2YXIgb2JqID0ge307XG5cbiAgICAgICAgICAgIGlmICgkc2NvcGUuc2VsZWN0ZWRJdGVtKSB7XG4gICAgICAgICAgICAgICRzY29wZS5zZWxlY3RlZEl0ZW0uZXhwYW5kZWQgPSB0cnVlO1xuICAgICAgICAgICAgICBvYmogPSAkc2NvcGUuc2VsZWN0ZWRJdGVtLmNoaWxkcmVuO1xuICAgICAgICAgICAgfSBlbHNlXG4gICAgICAgICAgICAgIG9iaiA9ICRzY29wZS50cmVlX2RhdGE7XG5cbiAgICAgICAgICAgIG9iai5wdXNoKHtcbiAgICAgICAgICAgICAgTmFtZTogJHNjb3BlLnByb2R1Y3QubmFtZSxcbiAgICAgICAgICAgICAgVmFsdWU6ICRzY29wZS5wcm9kdWN0LnZhbHVlLFxuICAgICAgICAgICAgICBRdWFudDogJHNjb3BlLnByb2R1Y3QucXVhbnQsXG4gICAgICAgICAgICAgIE9ic2VydmF0aW9uOiAkc2NvcGUucHJvZHVjdC5vYnNlcnZhdGlvbixcbiAgICAgICAgICAgICAgaWNvbnM6IHtcbiAgICAgICAgICAgICAgICBpY29uTGVhZjogXCJmYSBmYS1jaXJjbGUtb1wiLFxuICAgICAgICAgICAgICAgIGljb25Db2xsYXBzZTogXCJmYSBmYS1taW51c1wiLFxuICAgICAgICAgICAgICAgIGljb25FeHBhbmQ6IFwiZmEgZmEtcGx1c1wiXG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgfSBlbHNlIHtcblxuICAgICAgICAgICAgJHNjb3BlLnVwZGF0ZUl0ZW0oJHNjb3BlLnRyZWVfZGF0YSk7XG5cbiAgICAgICAgICAgIGFsZXJ0KFwiRGFkb3MgYWx0ZXJhZG9zIGNvbSBzdWNlc3NvIVwiKTtcbiAgICAgICAgICB9XG5cbiAgICAgICAgICAkdWliTW9kYWxJbnN0YW5jZS5jbG9zZSgnY2xvc2VkJyk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgY29uc29sZS5sb2coJ3Byb2R1Y3RGb3JtIGlzIG5vdCBpbiBzY29wZScpO1xuICAgICAgICB9XG4gICAgICB9O1xuXG4gICAgICAkc2NvcGUuY2FuY2VsID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAkdWliTW9kYWxJbnN0YW5jZS5kaXNtaXNzKCdjYW5jZWwnKTtcbiAgICAgIH07XG5cbiAgICAgICRzY29wZS51cGRhdGVJdGVtID0gZnVuY3Rpb24gKG9iaikge1xuICAgICAgICBpZiAob2JqKSB7XG4gICAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBvYmoubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgIHZhciBjdXJPYmogPSBvYmpbaV07XG4gICAgICAgICAgICBpZiAoY3VyT2JqICYmIGN1ck9iai5OYW1lID09ICRzY29wZS5vbGROYW1lKSB7XG4gICAgICAgICAgICAgIGN1ck9iai5OYW1lID0gJHNjb3BlLnByb2R1Y3QubmFtZTtcbiAgICAgICAgICAgICAgY3VyT2JqLlZhbHVlID0gJHNjb3BlLnByb2R1Y3QudmFsdWU7XG4gICAgICAgICAgICAgIGN1ck9iai5RdWFudCA9ICRzY29wZS5wcm9kdWN0LnF1YW50O1xuICAgICAgICAgICAgICBjdXJPYmouT2JzZXJ2YXRpb24gPSAkc2NvcGUucHJvZHVjdC5vYnNlcnZhdGlvbjtcbiAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICB9IGVsc2UgaWYgKGN1ck9iai5jaGlsZHJlbiAmJiBjdXJPYmouY2hpbGRyZW4ubGVuZ3RoID4gMCkge1xuICAgICAgICAgICAgICAkc2NvcGUudXBkYXRlSXRlbShjdXJPYmouY2hpbGRyZW4pO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfTtcbiAgICB9O1xuICB9XG5dKTtcblxuXG4vKipcbiAqIENvbnRyb2xzIGFsbCBvdGhlciBQYWdlc1xuICovXG5hcHAuY29udHJvbGxlcignUGFnZUN0cmwnLCBmdW5jdGlvbiAoIC8qICRzY29wZSwgJGxvY2F0aW9uLCAkaHR0cCAqLyApIHtcbiAgY29uc29sZS5sb2coXCJQYWdlIENvbnRyb2xsZXIgcmVwb3J0aW5nIGZvciBkdXR5LlwiKTtcbn0pOyJdfQ==
